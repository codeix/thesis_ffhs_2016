#!/usr/bin/env python3

import os
import csv
import time
import random
import serial
import paramiko
import itertools
import threading
import statistics
import configparser
from collections import defaultdict



BENCHPATH = 'cat /proc/benchmark/%s'
READ_TIME_INTERVAL = 0
REPEAT = 3



class PeakTech2015(object):

    ser = None
    value_buffer = None
    thread = None
    halt = False
    starttime = None

    def __init__(self):

        self.ser = serial.Serial(
            port='/dev/ttyUSB0',
            baudrate=2400,
            parity=serial.PARITY_ODD,
            stopbits=serial.STOPBITS_TWO,
            bytesize=serial.SEVENBITS
        )
        self.thread = threading.Thread(target=self.reader)
        self.thread.start()

    def set_buffer(self):
        self.starttime = time.time()
        self.ser.reset_input_buffer()
        self.value_buffer = list()

    def get_values(self):
        b = self.value_buffer
        self.value_buffer = None
        return b

    def close(self):
        self.halt = True
        self.thread.join()
        self.ser.close()

    def reader(self):
        while not self.halt:
            self.ser.reset_input_buffer()
            stream = self.ser.readline()
            if len(stream) != 14:
                time.sleep(1)
                continue
            value = abs(int(stream.decode()[:5]))
            if self.value_buffer is not None:
                self.value_buffer.append((time.time() - self.starttime, value))
                time.sleep(READ_TIME_INTERVAL)


class Board(object):

    ssh = None

    def __init__(self):
        self.ssh = paramiko.SSHClient()
        self.ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
        self.ssh.connect('192.168.1.100', username='pi')

    def benchmark(self, bench):
        cmd = BENCHPATH % bench
        ssh_stdin, ssh_stdout, ssh_stderr = self.ssh.exec_command(cmd)
        return ssh_stdout.readline().strip()

    def close(self):
        self.ssh.close()

def save_latex(val):
    return val.replace('_', '\_')


def write(all_data):
    for index, (benchmark, data) in enumerate(all_data.items()):
        with open('data%i.csv' % index, 'w', newline='') as csvfile:
            fieldnames = list()
            for rep in range(REPEAT):
                fieldnames += ['time%s' % rep, 'amp%s' % rep]
            writer = csv.DictWriter(csvfile, fieldnames=fieldnames)
            writer.writeheader()
            for i in itertools.count(start=0, step=1):
                row = list()
                for rep in range(REPEAT):
                    try:
                        t, a = data[rep]['values'][i]
                        row.append(('time%s' % rep, t))
                        row.append(('amp%s' % rep, a))
                    except IndexError:
                        pass
                if len(row):
                    writer.writerow(dict(row))
                else:
                    break
        with open('data%i.tex' % index, 'w') as texfile:
           median_values = list()
           mean_values = list()
           for rep in range(REPEAT):
               values = dict(data[rep]['values']).values()
               mean = statistics.mean(values)
               median = statistics.median(values)
               median_values.append(round(median))
               mean_values.append(round(mean, 2))
           texfile.write('\\def\\median{{%s}}%%\n' % ', '.join(['"%s"' % i for i in median_values]))
           texfile.write('\\def\\average{{%s}}%%\n' % ', '.join(['"%s"' % i for i in mean_values]))
           texfile.write('\\def\\run{{%s}}%%\n' % ', '.join(['"%s"' % (data[i]['run'] + 1) for i in range(REPEAT)]))
           texfile.write('\\def\\benchmark{%s}%%\n' % save_latex(benchmark))
           texfile.write('\\def\\description{%s}%%\n' % save_latex(data[0]['config']['desc']))

def main():
    pt = PeakTech2015()
    board = Board()
    config = configparser.RawConfigParser(dict_type=lambda: defaultdict(list))
    config.read('raspberry/benchmark_data.ini')
    bench = list()
    for i in range(REPEAT):
        bench += config.sections()
    random.shuffle(bench)

    data = dict()
    for index, sec in enumerate(bench):
        pt.set_buffer()
        time = board.benchmark(sec)
        values = pt.get_values()
        data.setdefault(sec, list())
        data[sec].append(dict(values=values, run=index, config=config[sec]))
        print('command: %s/%s ==> %s' % (sec, time, dict(values).values()))

    pt.close()
    board.close()
    import pdb;pdb.set_trace()
    write(data)



import pickle
st = b'\x80\x03}q\x00(X\x03\x00\x00\x00nopq\x01]q\x02(}q\x03(X\x03\x00\x00\x00runq\x04K\x07X\x06\x00\x00\x00valuesq\x05]q\x06(G?\xe3[t\x00\x00\x00\x00M\xbb\x01\x86q\x07G?\xf2a\xc7\xc0\x00\x00\x00M\xbb\x01\x86q\x08G?\xfb\x99$\x80\x00\x00\x00M\xbb\x01\x86q\tG@\x02\xa9\xa8@\x00\x00\x00M\xbb\x01\x86q\nG@\x07\x03\xea\xe0\x00\x00\x00M\xbb\x01\x86q\x0bG@\x0b^\x06\x80\x00\x00\x00M\xbb\x01\x86q\x0cG@\x0f\xf9\xad\xc0\x00\x00\x00M\xba\x01\x86q\rG@\x12I\xa10\x00\x00\x00M\xba\x01\x86q\x0eG@\x14\x97l@\x00\x00\x00M\xbb\x01\x86q\x0fG@\x17\x06\x06\xc0\x00\x00\x00M\xb6\x01\x86q\x10G@\x193\x1c\x90\x00\x00\x00M\xb4\x01\x86q\x11G@\x1b`$0\x00\x00\x00M\xb1\x01\x86q\x12G@\x1d\xaf\x04\xc0\x00\x00\x00M\xb2\x01\x86q\x13G@\x1f\xfa\xca\xf0\x00\x00\x00M\xb1\x01\x86q\x14G@!$E8\x00\x00\x00M\xb1\x01\x86q\x15G@"[\x97\xa8\x00\x00\x00M\xb2\x01\x86q\x16G@#r\x1c\x98\x00\x00\x00M\xb2\x01\x86q\x17G@$\x99\x0b`\x00\x00\x00M\xb2\x01\x86q\x18G@%\xbf\xee\x08\x00\x00\x00M\xb2\x01\x86q\x19G@&\xe6V\xd8\x00\x00\x00M\xb2\x01\x86q\x1aG@(\r<\xc8\x00\x00\x00M\xb2\x01\x86q\x1beu}q\x1c(h\x04K\x08h\x05]q\x1d(G?\xcbG|\x00\x00\x00\x00M\xb1\x01\x86q\x1eG?\xe9@K\x80\x00\x00\x00M\xbb\x01\x86q\x1fG?\xf6Zv\x80\x00\x00\x00M\xbb\x01\x86q G@\x00\n|`\x00\x00\x00M\xba\x01\x86q!G@\x04\xa6\x11@\x00\x00\x00M\xba\x01\x86q"G@\t\x81U \x00\x00\x00M\xba\x01\x86q#G@\x0e^O \x00\x00\x00M\xbb\x01\x86q$G@\x11\\H\xa0\x00\x00\x00M\xbb\x01\x86q%G@\x13\xaa\x1a\xb0\x00\x00\x00M\xb8\x01\x86q&G@\x16\x18\xb4\xa0\x00\x00\x00M\xb4\x01\x86q\'G@\x18f\x80\x10\x00\x00\x00M\xb2\x01\x86q(G@\x1a\xd5!@\x00\x00\x00M\xb2\x01\x86q)G@\x1dB\xa6\x90\x00\x00\x00M\xb2\x01\x86q*G@\x1f\xb7^\xc0\x00\x00\x00M\xb2\x01\x86q+G@ \xff\x8c\x90\x00\x00\x00M\xb2\x01\x86q,G@"&v\x98\x00\x00\x00M\xb2\x01\x86q-G@#<\xf4\x10\x00\x00\x00M\xb2\x01\x86q.G@$s\xbch\x00\x00\x00M\xb2\x01\x86q/G@%\x9b.\x10\x00\x00\x00M\xb2\x01\x86q0G@&\xcea\xb8\x00\x00\x00M\xb1\x01\x86q1G@\'\xd8\x1d \x00\x00\x00M\xb1\x01\x86q2eu}q3(h\x04K\x0eh\x05]q4(G?\xb4\x1ed\x00\x00\x00\x00M\xa8\x01\x86q5G?\xe5\xf8\x90\x00\x00\x00\x00M\xbb\x01\x86q6G?\xf4/\x9f\xc0\x00\x00\x00M\xbb\x01\x86q7G?\xfc\xe3\xcb\xc0\x00\x00\x00M\xbb\x01\x86q8G@\x02\xcb\xef\xe0\x00\x00\x00M\xba\x01\x86q9G@\x07g\xaa`\x00\x00\x00M\xba\x01\x86q:G@\x0cD\xd8\x80\x00\x00\x00M\xbb\x01\x86q;G@\x10\x90\xff\x90\x00\x00\x00M\xba\x01\x86q<G@\x12\xff\x95 \x00\x00\x00M\xba\x01\x86q=G@\x15Lb\xe0\x00\x00\x00M\xba\x01\x86q>G@\x17\x9a;\xe0\x00\x00\x00M\xba\x01\x86q?G@\x19\xc7J \x00\x00\x00M\xba\x01\x86q@G@\x1c5\xe2\xb0\x00\x00\x00M\xb6\x01\x86qAG@\x1e\x83\xb4\xf0\x00\x00\x00M\xb2\x01\x86qBG@ u\r\x88\x00\x00\x00M\xb2\x01\x86qCG@!~\xc7\xf8\x00\x00\x00M\xb2\x01\x86qDG@"\xb6\x95(\x00\x00\x00M\xb1\x01\x86qEG@#\xe8=x\x00\x00\x00M\xb1\x01\x86qFG@%\x03\xe6\xa8\x00\x00\x00M\xb2\x01\x86qGG@&*\xcb\x98\x00\x00\x00M\xb2\x01\x86qHG@\'b\x1c\x00\x00\x00\x00M\xb2\x01\x86qIG@(\x89\x02\x18\x00\x00\x00M\xb2\x01\x86qJeueX\t\x00\x00\x00addl_zeroqK]qL(}qM(h\x04K\x02h\x05]qN(G?\xe2t\x7f\x80\x00\x00\x00M\xb8\x01\x86qOG?\xf2\xf4\x84@\x00\x00\x00M\xb8\x01\x86qPG?\xfc+\xd7@\x00\x00\x00M\xb6\x01\x86qQG@\x02\xf3\x1b\xc0\x00\x00\x00M\xb1\x01\x86qRG@\x07\xd0b\xc0\x00\x00\x00M\xaf\x01\x86qSG@\x0c(X\x00\x00\x00\x00M\xaf\x01\x86qTG@\x10a\xff\xd0\x00\x00\x00M\xaf\x01\x86qUG@\x12\xd0\xa1\xf0\x00\x00\x00M\xaf\x01\x86qVG@\x15\x1ei\x10\x00\x00\x00M\xaf\x01\x86qWG@\x17\x8c\xfb`\x00\x00\x00M\xaf\x01\x86qXG@\x19\xfb\x9e\xe0\x00\x00\x00M\xaf\x01\x86qYG@\x1coM\xe0\x00\x00\x00M\xaf\x01\x86qZG@\x1e\xb6\xedp\x00\x00\x00M\xaf\x01\x86q[G@ \x82i\xe8\x00\x00\x00M\xaf\x01\x86q\\G@!\x98\xf5@\x00\x00\x00M\xaf\x01\x86q]G@"\xd08`\x00\x00\x00M\xaf\x01\x86q^G@#\xf7 @\x00\x00\x00M\xae\x01\x86q_G@%*\xdah\x00\x00\x00M\xaf\x01\x86q`G@&4\x13H\x00\x00\x00M\xaf\x01\x86qaG@\'k\xe4 \x00\x00\x00M\xaf\x01\x86qbG@(\x9e\x0e\xd8\x00\x00\x00M\xaf\x01\x86qceu}qd(h\x04K\x05h\x05]qe(G?\xe1\xa6\n\x80\x00\x00\x00M\xb7\x01\x86qfG?\xf1\xf9\xbf@\x00\x00\x00M\xb8\x01\x86qgG?\xfb\xb3\xf8\xc0\x00\x00\x00M\xb9\x01\x86qhG@\x02u\xae`\x00\x00\x00M\xb8\x01\x86qiG@\x06\xcf\xd0\x80\x00\x00\x00M\xb8\x01\x86qjG@\x0b)\xf2\xa0\x00\x00\x00M\xb4\x01\x86qkG@\x0f\xc3\x83\x00\x00\x00\x00M\xb2\x01\x86qlG@\x12P] \x00\x00\x00M\xaf\x01\x86qmG@\x14\xbe\xf1\xa0\x00\x00\x00M\xaf\x01\x86qnG@\x17-\x97@\x00\x00\x00M\xaf\x01\x86qoG@\x19{^ \x00\x00\x00M\xaf\x01\x86qpG@\x1b\xc80`\x00\x00\x00M\xaf\x01\x86qqG@\x1d\xf51\xb0\x00\x00\x00M\xaf\x01\x86qrG@ 1\xe8\xd8\x00\x00\x00M\xaf\x01\x86qsG@!X\xd4\x18\x00\x00\x00M\xaf\x01\x86qtG@"\x8c\x8ah\x00\x00\x00M\xaf\x01\x86quG@#\x96Ax\x00\x00\x00M\xaf\x01\x86qvG@$\xcd\x91@\x00\x00\x00M\xaf\x01\x86qwG@%\xff8\xb8\x00\x00\x00M\xaf\x01\x86qxG@\'\x1a\xe0\xe8\x00\x00\x00M\xaf\x01\x86qyG@(A\xc5\x80\x00\x00\x00M\xaf\x01\x86qzeu}q{(h\x04K\th\x05]q|(G?\xc1\xd5\xd0\x00\x00\x00\x00M\xb1\x01\x86q}G?\xe7\x98N\x80\x00\x00\x00M\xb5\x01\x86q~G?\xf4\xa9A\x00\x00\x00\x00M\xb6\x01\x86q\x7fG?\xfd\xe0\x95@\x00\x00\x00M\xb8\x01\x86q\x80G@\x03\xcbd@\x00\x00\x00M\xb8\x01\x86q\x81G@\x08g\x02`\x00\x00\x00M\xb8\x01\x86q\x82G@\rFE\xa0\x00\x00\x00M\xb9\x01\x86q\x83G@\x11\x10\xb3p\x00\x00\x00M\xb6\x01\x86q\x84G@\x13^\x8d\xe0\x00\x00\x00M\xb4\x01\x86q\x85G@\x15\xaca\x10\x00\x00\x00M\xaf\x01\x86q\x86G@\x17\xfa*P\x00\x00\x00M\xaf\x01\x86q\x87G@\x1aG\x01@\x00\x00\x00M\xaf\x01\x86q\x88G@\x1c\xb5\x93\x80\x00\x00\x00M\xaf\x01\x86q\x89G@\x1f$1\x10\x00\x00\x00M\xaf\x01\x86q\x8aG@ \xb9\x01\x98\x00\x00\x00M\xaf\x01\x86q\x8bG@!\xf0M\x18\x00\x00\x00M\xaf\x01\x86q\x8cG@#\'\x95h\x00\x00\x00M\xaf\x01\x86q\x8dG@$>\x1c \x00\x00\x00M\xaf\x01\x86q\x8eG@%e\x02 \x00\x00\x00M\xaf\x01\x86q\x8fG@&\x9b\xc9\x08\x00\x00\x00M\xaf\x01\x86q\x90G@\'\xc2\xb4(\x00\x00\x00M\xaf\x01\x86q\x91eueX\n\x00\x00\x00imull_zeroq\x92]q\x93(}q\x94(h\x04K\x00h\x05]q\x95(G?\xdf2l\x00\x00\x00\x00M\xb5\x01\x86q\x96G?\xf1\x04\r\x80\x00\x00\x00M\xb2\x01\x86q\x97G?\xfa\x9d\xa9\x80\x00\x00\x00M\xb0\x01\x86q\x98G@\x01w\xc3@\x00\x00\x00M\xb0\x01\x86q\x99G@\x06T\xf8\xe0\x00\x00\x00M\xb0\x01\x86q\x9aG@\x0b\x1b\x99\xe0\x00\x00\x00M\xaf\x01\x86q\x9bG@\x0f\x8a\x13`\x00\x00\x00M\xaf\x01\x86q\x9cG@\x12\x12\xe9`\x00\x00\x00M\xb0\x01\x86q\x9dG@\x14\x81t\xb0\x00\x00\x00M\xb0\x01\x86q\x9eG@\x16\xcfO@\x00\x00\x00M\xb0\x01\x86q\x9fG@\x19>\xfd\xf0\x00\x00\x00M\xb0\x01\x86q\xa0G@\x1b\xac\x830\x00\x00\x00M\xb0\x01\x86q\xa1G@\x1d\xfaW\x10\x00\x00\x00M\xb0\x01\x86q\xa2G@ #\x97\x88\x00\x00\x00M\xb0\x01\x86q\xa3G@!J}\xb0\x00\x00\x00M\xb0\x01\x86q\xa4G@"qip\x00\x00\x00M\xb0\x01\x86q\xa5G@#\xa8\xaf\xa8\x00\x00\x00M\xb0\x01\x86q\xa6G@$\xdf\xff\xa8\x00\x00\x00M\xb0\x01\x86q\xa7G@&\x06\xe5\x88\x00\x00\x00M\xb0\x01\x86q\xa8G@\'>4\xc8\x00\x00\x00M\xb0\x01\x86q\xa9G@(d\x9a\x80\x00\x00\x00M\xb0\x01\x86q\xaaeu}q\xab(h\x04K\x0ch\x05]q\xac(G?\xdd:&\x00\x00\x00\x00M\xb1\x01\x86q\xadG?\xf0\x81\x92\x80\x00\x00\x00M\xb5\x01\x86q\xaeG?\xf9\xb9!\x00\x00\x00\x00M\xb9\x01\x86q\xafG@\x01z5\xa0\x00\x00\x00M\xb9\x01\x86q\xb0G@\x06U? \x00\x00\x00M\xb9\x01\x86q\xb1G@\x0b2|\xe0\x00\x00\x00M\xb9\x01\x86q\xb2G@\x0f\xce0\x80\x00\x00\x00M\xb9\x01\x86q\xb3G@\x12U\xb6\x90\x00\x00\x00M\xb9\x01\x86q\xb4G@\x14\xa2}`\x00\x00\x00M\xb4\x01\x86q\xb5G@\x16\xcf~\xf0\x00\x00\x00M\xb2\x01\x86q\xb6G@\x18\xfc\x99 \x00\x00\x00M\xb0\x01\x86q\xb7G@\x1bJj\xf0\x00\x00\x00M\xaf\x01\x86q\xb8G@\x1dwy \x00\x00\x00M\xaf\x01\x86q\xb9G@\x1f\xa4\x8b\x90\x00\x00\x00M\xb0\x01\x86q\xbaG@ \xf90(\x00\x00\x00M\xb0\x01\x86q\xbbG@"0y\xc0\x00\x00\x00M\xb0\x01\x86q\xbcG@#g\xcb`\x00\x00\x00M\xb0\x01\x86q\xbdG@$\xa4\xc3 \x00\x00\x00M\xb0\x01\x86q\xbeG@%\xc5w\xf8\x00\x00\x00M\xb0\x01\x86q\xbfG@&\xfc\xbeh\x00\x00\x00M\xb0\x01\x86q\xc0G@(%6`\x00\x00\x00M\xaf\x01\x86q\xc1eu}q\xc2(h\x04K\x11h\x05]q\xc3(G?\xd0\x10\xfb\x00\x00\x00\x00M\xc9\x01\x86q\xc4G?\xeawC\x80\x00\x00\x00M\xe2\x01\x86q\xc5G?\xf5\xef\xab\x80\x00\x00\x00M\xc7\x01\x86q\xc6G?\xfe\xa3\xfd\xc0\x00\x00\x00M\xc7\x01\x86q\xc7G@\x03\xed\xad\x00\x00\x00\x00M\xc7\x01\x86q\xc8G@\x08\xca\xdd`\x00\x00\x00M\xc6\x01\x86q\xc9G@\r\xa8\x0c\xa0\x00\x00\x00M\xc2\x01\x86q\xcaG@\x11B\x9b\xb0\x00\x00\x00M\xbe\x01\x86q\xcbG@\x13\x8fo\xd0\x00\x00\x00M\xbe\x01\x86q\xccG@\x15\xddE0\x00\x00\x00M\xbe\x01\x86q\xcdG@\x18\nD\xa0\x00\x00\x00M\xbe\x01\x86q\xceG@\x1ax\xe4\x80\x00\x00\x00M\xbe\x01\x86q\xcfG@\x1c\xc6\xb1`\x00\x00\x00M\xbe\x01\x86q\xd0G@\x1f- \xe0\x00\x00\x00M\xbe\x01\x86q\xd1G@ \xa0\xc4\xa0\x00\x00\x00M\xbe\x01\x86q\xd2G@!\xd8\x13(\x00\x00\x00M\xbe\x01\x86q\xd3G@#\t\xc3\xd8\x00\x00\x00M\xbe\x01\x86q\xd4G@$%j\x88\x00\x00\x00M\xbd\x01\x86q\xd5G@%LR(\x00\x00\x00M\xbe\x01\x86q\xd6G@&s;\xe8\x00\x00\x00M\xbe\x01\x86q\xd7G@\'\x9a#h\x00\x00\x00M\xbe\x01\x86q\xd8eueX\x08\x00\x00\x00imull_32q\xd9]q\xda(}q\xdb(h\x04K\x01h\x05]q\xdc(G?\xcf9\xe0\x00\x00\x00\x00M\xb0\x01\x86q\xddG?\xe96@\x80\x00\x00\x00M\xa9\x01\x86q\xdeG?\xf5\xd2\xa4\x80\x00\x00\x00M\xa8\x01\x86q\xdfG?\xfe\x86\xe7\x00\x00\x00\x00M\xa8\x01\x86q\xe0G@\x03\x9dp\xe0\x00\x00\x00M\xa8\x01\x86q\xe1G@\x087\x11\x80\x00\x00\x00M\xa8\x01\x86q\xe2G@\r\x16\xc8\x00\x00\x00\x00M\xa9\x01\x86q\xe3G@\x10\xf8\xbf\xb0\x00\x00\x00M\xa9\x01\x86q\xe4G@\x13t\xa5P\x00\x00\x00M\xa9\x01\x86q\xe5G@\x15\xb5\'\x90\x00\x00\x00M\xa9\x01\x86q\xe6G@\x18#\xb8p\x00\x00\x00M\xa8\x01\x86q\xe7G@\x1as\x93`\x00\x00\x00M\xa8\x01\x86q\xe8G@\x1c\xbeWp\x00\x00\x00M\xa8\x01\x86q\xe9G@\x1f\x0c/0\x00\x00\x00M\xa8\x01\x86q\xeaG@ \xbdh \x00\x00\x00M\xa8\x01\x86q\xebG@!\xd3\xe5x\x00\x00\x00M\xa9\x01\x86q\xecG@"\xfa\xd8\xa8\x00\x00\x00M\xa9\x01\x86q\xedG@$!\xcbH\x00\x00\x00M\xa8\x01\x86q\xeeG@%H\xa8\x08\x00\x00\x00M\xa8\x01\x86q\xefG@&on\x98\x00\x00\x00M\xa8\x01\x86q\xf0G@\'\x95\xf7\x98\x00\x00\x00M\xa8\x01\x86q\xf1G@(\xbc\xe4\xd8\x00\x00\x00M\xa8\x01\x86q\xf2eu}q\xf3(h\x04K\x04h\x05]q\xf4(G?\xca\xa5\xe2\x00\x00\x00\x00M\xb9\x01\x86q\xf5G?\xeaO/\x80\x00\x00\x00M\xdb\x01\x86q\xf6G?\xf6F\x1a@\x00\x00\x00M\xcd\x01\x86q\xf7G?\xff}\x98\x00\x00\x00\x00M\xc0\x01\x86q\xf8G@\x04\x18\xf4`\x00\x00\x00M\xc0\x01\x86q\xf9G@\x08\xf4\x0b@\x00\x00\x00M\xc0\x01\x86q\xfaG@\r\x8f\xc1\x00\x00\x00\x00M\xbd\x01\x86q\xfbG@\x11/Hp\x00\x00\x00M\xb9\x01\x86q\xfcG@\x13B\xbe\x90\x00\x00\x00M\xb6\x01\x86q\xfdG@\x15\xb1XP\x00\x00\x00M\xb7\x01\x86q\xfeG@\x18\x15\x9d\xe0\x00\x00\x00M\xb7\x01\x86q\xffG@\x1aL\xfc@\x00\x00\x00M\xb6\x01\x86r\x00\x01\x00\x00G@\x1c\x99\xcb`\x00\x00\x00M\xb6\x01\x86r\x01\x01\x00\x00G@\x1e\xe2y\xa0\x00\x00\x00M\xb6\x01\x86r\x02\x01\x00\x00G@ y\xf3\xb0\x00\x00\x00M\xb6\x01\x86r\x03\x01\x00\x00G@!\xb1@P\x00\x00\x00M\xb7\x01\x86r\x04\x01\x00\x00G@"\xe3\xf0\xf0\x00\x00\x00M\xb7\x01\x86r\x05\x01\x00\x00G@#\xee\xac\x98\x00\x00\x00M\xb7\x01\x86r\x06\x01\x00\x00G@%%\xfcH\x00\x00\x00M\xb6\x01\x86r\x07\x01\x00\x00G@&]Gx\x00\x00\x00M\xb6\x01\x86r\x08\x01\x00\x00G@\'\x83\xae@\x00\x00\x00M\xb6\x01\x86r\t\x01\x00\x00G@(\xba\xf6\xe8\x00\x00\x00M\xb7\x01\x86r\n\x01\x00\x00eu}r\x0b\x01\x00\x00(h\x04K\rh\x05]r\x0c\x01\x00\x00(G?\xd0Ja\x00\x00\x00\x00M\xb0\x01\x86r\r\x01\x00\x00G?\xea\x93\xee\x80\x00\x00\x00M\xb1\x01\x86r\x0e\x01\x00\x00G?\xf7\x04C\x00\x00\x00\x00M\xb2\x01\x86r\x0f\x01\x00\x00G?\xff\xb4K\x00\x00\x00\x00M\xb2\x01\x86r\x10\x01\x00\x00G@\x04u\xd8\xe0\x00\x00\x00M\xaf\x01\x86r\x11\x01\x00\x00G@\t\x11} \x00\x00\x00M\xab\x01\x86r\x12\x01\x00\x00G@\rk\xa9\xa0\x00\x00\x00M\xa9\x01\x86r\x13\x01\x00\x00G@\x10\xe2\xe2p\x00\x00\x00M\xa9\x01\x86r\x14\x01\x00\x00G@\x130\xae0\x00\x00\x00M\xa9\x01\x86r\x15\x01\x00\x00G@\x15\x9e=\x80\x00\x00\x00M\xa9\x01\x86r\x16\x01\x00\x00G@\x18\x0c\xdf\xb0\x00\x00\x00M\xa9\x01\x86r\x17\x01\x00\x00G@\x1a{o\x10\x00\x00\x00M\xa9\x01\x86r\x18\x01\x00\x00G@\x1c\xc9EP\x00\x00\x00M\xa9\x01\x86r\x19\x01\x00\x00G@\x1f\x17\x14`\x00\x00\x00M\xa9\x01\x86r\x1a\x01\x00\x00G@ \xa2\x0e0\x00\x00\x00M\xa9\x01\x86r\x1b\x01\x00\x00G@!\xc8\xfa\xa0\x00\x00\x00M\xa9\x01\x86r\x1c\x01\x00\x00G@"\xff\xc2\xa0\x00\x00\x00M\xa8\x01\x86r\x1d\x01\x00\x00G@$\'4@\x00\x00\x00M\xa8\x01\x86r\x1e\x01\x00\x00G@%]\xf9\x00\x00\x00\x00M\xa8\x01\x86r\x1f\x01\x00\x00G@&\x95C\xe0\x00\x00\x00M\xa9\x01\x86r \x01\x00\x00G@\'\xcc\x91@\x00\x00\x00M\xa9\x01\x86r!\x01\x00\x00eueX\x07\x00\x00\x00nop_nopr"\x01\x00\x00]r#\x01\x00\x00(}r$\x01\x00\x00(h\x04K\x03h\x05]r%\x01\x00\x00(G?\xdd\xb0\xee\x00\x00\x00\x00M\xaf\x01\x86r&\x01\x00\x00G?\xf0\xa3\x81\x80\x00\x00\x00M\xdd\x01\x86r\'\x01\x00\x00G?\xf9\xc2;\x00\x00\x00\x00M\xc1\x01\x86r(\x01\x00\x00G@\x01\x05\xfa\xa0\x00\x00\x00M\xc1\x01\x86r)\x01\x00\x00G@\x05\xe1\x10\xc0\x00\x00\x00M\xc2\x01\x86r*\x01\x00\x00G@\n\xad\xe5@\x00\x00\x00M\xc2\x01\x86r+\x01\x00\x00G@\x0e\xd6\xb1\xa0\x00\x00\x00M\xc2\x01\x86r,\x01\x00\x00G@\x11\xda\x00\xf0\x00\x00\x00M\xbd\x01\x86r-\x01\x00\x00G@\x14H\xa0`\x00\x00\x00M\xb9\x01\x86r.\x01\x00\x00G@\x16\x96^`\x00\x00\x00M\xb9\x01\x86r/\x01\x00\x00G@\x19\x04\xfa\xe0\x00\x00\x00M\xb9\x01\x86r0\x01\x00\x00G@\x1br\x93\x10\x00\x00\x00M\xb9\x01\x86r1\x01\x00\x00G@\x1d\xc0e\xf0\x00\x00\x00M\xb9\x01\x86r2\x01\x00\x00G@ \x07\x1e0\x00\x00\x00M\xb9\x01\x86r3\x01\x00\x00G@!.\x07\x88\x00\x00\x00M\xb9\x01\x86r4\x01\x00\x00G@"T\xf3@\x00\x00\x00M\xb9\x01\x86r5\x01\x00\x00G@#\x8c;\x00\x00\x00\x00M\xb9\x01\x86r6\x01\x00\x00G@$\xc3\x89\xf0\x00\x00\x00M\xb9\x01\x86r7\x01\x00\x00G@%\xeaq\x00\x00\x00\x00M\xb9\x01\x86r8\x01\x00\x00G@\'!;\x18\x00\x00\x00M\xb9\x01\x86r9\x01\x00\x00G@(X\x85\x00\x00\x00\x00M\xb9\x01\x86r:\x01\x00\x00G@)o\x0c\xe8\x00\x00\x00M\xb9\x01\x86r;\x01\x00\x00G@*\x95\xf4\x18\x00\x00\x00M\xb9\x01\x86r<\x01\x00\x00G@+\xcdE\x80\x00\x00\x00M\xb9\x01\x86r=\x01\x00\x00G@,\xf4+\xe0\x00\x00\x00M\xb9\x01\x86r>\x01\x00\x00G@.+w\xd8\x00\x00\x00M\xb9\x01\x86r?\x01\x00\x00eu}r@\x01\x00\x00(h\x04K\x06h\x05]rA\x01\x00\x00(G?\xd5\xebd\x00\x00\x00\x00M\xb0\x01\x86rB\x01\x00\x00G?\xedd>\x00\x00\x00\x00M\xb1\x01\x86rC\x01\x00\x00G?\xf8l?\x80\x00\x00\x00M\xb4\x01\x86rD\x01\x00\x00G@\x01\x13`\xa0\x00\x00\x00M\xb4\x01\x86rE\x01\x00\x00G@\x05\xaf\x1b`\x00\x00\x00M\xb4\x01\x86rF\x01\x00\x00G@\nH\xb0\xa0\x00\x00\x00M\xb4\x01\x86rG\x01\x00\x00G@\x0e\xe4H\xc0\x00\x00\x00M\xb4\x01\x86rH\x01\x00\x00G@\x11\xbf\xfe \x00\x00\x00M\xb4\x01\x86rI\x01\x00\x00G@\x14.\x90@\x00\x00\x00M\xb4\x01\x86rJ\x01\x00\x00G@\x16\x9d1\xd0\x00\x00\x00M\xb4\x01\x86rK\x01\x00\x00G@\x18\xea\xfb \x00\x00\x00M\xb4\x01\x86rL\x01\x00\x00G@\x1bY\x93\x00\x00\x00\x00M\xaf\x01\x86rM\x01\x00\x00G@\x1d\xa6_P\x00\x00\x00M\xab\x01\x86rN\x01\x00\x00G@\x1f\xd3s\xe0\x00\x00\x00M\xab\x01\x86rO\x01\x00\x00G@!\x00=\x80\x00\x00\x00M\xab\x01\x86rP\x01\x00\x00G@"\'\'X\x00\x00\x00M\xaa\x01\x86rQ\x01\x00\x00G@#=\xae\xb8\x00\x00\x00M\xaa\x01\x86rR\x01\x00\x00G@$T7\xd0\x00\x00\x00M\xab\x01\x86rS\x01\x00\x00G@%z\xa0x\x00\x00\x00M\xab\x01\x86rT\x01\x00\x00G@&\xb1\xe8\xf8\x00\x00\x00M\xab\x01\x86rU\x01\x00\x00G@\'\xe92\x80\x00\x00\x00M\xab\x01\x86rV\x01\x00\x00G@)\')\x80\x00\x00\x00M\xab\x01\x86rW\x01\x00\x00G@*Gp0\x00\x00\x00M\xab\x01\x86rX\x01\x00\x00G@+~\xb8(\x00\x00\x00M\xab\x01\x86rY\x01\x00\x00G@,\xa6\xa6\xc0\x00\x00\x00M\xab\x01\x86rZ\x01\x00\x00G@-\xcc\x05p\x00\x00\x00M\xab\x01\x86r[\x01\x00\x00G@.\xf2\xed\x00\x00\x00\x00M\xab\x01\x86r\\\x01\x00\x00eu}r]\x01\x00\x00(h\x04K\x0fh\x05]r^\x01\x00\x00(G?\xdf!\xad\x00\x00\x00\x00M\xb3\x01\x86r_\x01\x00\x00G?\xf1~\xbf\xc0\x00\x00\x00M\xb4\x01\x86r`\x01\x00\x00G?\xfa\xb5\xc1\xc0\x00\x00\x00M\xb5\x01\x86ra\x01\x00\x00G@\x01\xf6\x8c`\x00\x00\x00M\xb4\x01\x86rb\x01\x00\x00G@\x06\x928\x80\x00\x00\x00M\xb4\x01\x86rc\x01\x00\x00G@\x0b-\xe3\x00\x00\x00\x00M\xb4\x01\x86rd\x01\x00\x00G@\x10\x05\x8c\xf0\x00\x00\x00M\xb4\x01\x86re\x01\x00\x00G@\x12s#\x80\x00\x00\x00M\xb4\x01\x86rf\x01\x00\x00G@\x14\xc1\x0f\x80\x00\x00\x00M\xb3\x01\x86rg\x01\x00\x00G@\x17/\x8eP\x00\x00\x00M\xaf\x01\x86rh\x01\x00\x00G@\x19}\\\xf0\x00\x00\x00M\xac\x01\x86ri\x01\x00\x00G@\x1b\xaab\xa0\x00\x00\x00M\xac\x01\x86rj\x01\x00\x00G@\x1d\xd7\x80\x00\x00\x00\x00M\xac\x01\x86rk\x01\x00\x00G@ \x12\xa8\xc8\x00\x00\x00M\xab\x01\x86rl\x01\x00\x00G@!)/h\x00\x00\x00M\xab\x01\x86rm\x01\x00\x00G@"?\xafx\x00\x00\x00M\xac\x01\x86rn\x01\x00\x00G@#f\x1d`\x00\x00\x00M\xac\x01\x86ro\x01\x00\x00G@$\x9di`\x00\x00\x00M\xac\x01\x86rp\x01\x00\x00G@%\xd4\xb4\xd8\x00\x00\x00M\xac\x01\x86rq\x01\x00\x00G@\'\x12%\x90\x00\x00\x00M\xab\x01\x86rr\x01\x00\x00G@(2i8\x00\x00\x00M\xab\x01\x86rs\x01\x00\x00G@)j2\xd8\x00\x00\x00M\xab\x01\x86rt\x01\x00\x00G@*\x92+\x80\x00\x00\x00M\xac\x01\x86ru\x01\x00\x00G@+\xb7\x86 \x00\x00\x00M\xab\x01\x86rv\x01\x00\x00G@,\xdenx\x00\x00\x00M\xab\x01\x86rw\x01\x00\x00G@.\x15\xb1\xd0\x00\x00\x00M\xab\x01\x86rx\x01\x00\x00eueX\x07\x00\x00\x00addl_32ry\x01\x00\x00]rz\x01\x00\x00(}r{\x01\x00\x00(h\x04K\nh\x05]r|\x01\x00\x00(G?\xb8\xd9x\x00\x00\x00\x00M\xaf\x01\x86r}\x01\x00\x00G?\xe6\x90@\x00\x00\x00\x00M\xbb\x01\x86r~\x01\x00\x00G?\xf5\x12\xc0@\x00\x00\x00M\xba\x01\x86r\x7f\x01\x00\x00G?\xfe9\xbf\x80\x00\x00\x00M\xba\x01\x86r\x80\x01\x00\x00G@\x03\xb8~\xc0\x00\x00\x00M\xba\x01\x86r\x81\x01\x00\x00G@\x08V4\x00\x00\x00\x00M\xba\x01\x86r\x82\x01\x00\x00G@\x0c\xed\xbe\xa0\x00\x00\x00M\xba\x01\x86r\x83\x01\x00\x00G@\x10\xc4\xb9\xa0\x00\x00\x00M\xb8\x01\x86r\x84\x01\x00\x00G@\x133G\xf0\x00\x00\x00M\xb4\x01\x86r\x85\x01\x00\x00G@\x15`_p\x00\x00\x00M\xb2\x01\x86r\x86\x01\x00\x00G@\x17\xad \xf0\x00\x00\x00M\xb1\x01\x86r\x87\x01\x00\x00G@\x19\xfb\xfb\xf0\x00\x00\x00M\xb1\x01\x86r\x88\x01\x00\x00G@\x1cH\xd0 \x00\x00\x00M\xb2\x01\x86r\x89\x01\x00\x00G@\x1e\x96\x93 \x00\x00\x00M\xb2\x01\x86r\x8a\x01\x00\x00G@ r7\xf0\x00\x00\x00M\xb2\x01\x86r\x8b\x01\x00\x00G@!\x99"\x10\x00\x00\x00M\xb2\x01\x86r\x8c\x01\x00\x00G@"\xd0m\xd8\x00\x00\x00M\xb2\x01\x86r\x8d\x01\x00\x00G@$\x0790\x00\x00\x00M\xb1\x01\x86r\x8e\x01\x00\x00G@%.\x18\xd8\x00\x00\x00M\xb1\x01\x86r\x8f\x01\x00\x00G@&ej\xd0\x00\x00\x00M\xb2\x01\x86r\x90\x01\x00\x00G@\'\x9c\xb8x\x00\x00\x00M\xb2\x01\x86r\x91\x01\x00\x00G@(\xb3=\xb0\x00\x00\x00M\xb2\x01\x86r\x92\x01\x00\x00eu}r\x93\x01\x00\x00(h\x04K\x0bh\x05]r\x94\x01\x00\x00(G?\xe1\x07\xfc\x00\x00\x00\x00M\xb3\x01\x86r\x95\x01\x00\x00G?\xf2>\x85\x00\x00\x00\x00M\xb7\x01\x86r\x96\x01\x00\x00G?\xfbu\xcc\x80\x00\x00\x00M\xba\x01\x86r\x97\x01\x00\x00G@\x02\x96\x19@\x00\x00\x00M\xba\x01\x86r\x98\x01\x00\x00G@\x07s;`\x00\x00\x00M\xbb\x01\x86r\x99\x01\x00\x00G@\x0c\\\xaf\x00\x00\x00\x00M\xbb\x01\x86r\x9a\x01\x00\x00G@\x10v\x07 \x00\x00\x00M\xb8\x01\x86r\x9b\x01\x00\x00G@\x12\xc3\xe1\x80\x00\x00\x00M\xb4\x01\x86r\x9c\x01\x00\x00G@\x14\xf0\xee\x00\x00\x00\x00M\xb1\x01\x86r\x9d\x01\x00\x00G@\x17_\x86 \x00\x00\x00M\xb2\x01\x86r\x9e\x01\x00\x00G@\x19\xacA\xd0\x00\x00\x00M\xb2\x01\x86r\x9f\x01\x00\x00G@\x1c\x12\xabp\x00\x00\x00M\xb2\x01\x86r\xa0\x01\x00\x00G@\x1e\'.`\x00\x00\x00M\xb2\x01\x86r\xa1\x01\x00\x00G@ J\xe6 \x00\x00\x00M\xb2\x01\x86r\xa2\x01\x00\x00G@!}\x0c\x00\x00\x00\x00M\xb1\x01\x86r\xa3\x01\x00\x00G@"\x98\xb3\x18\x00\x00\x00M\xb1\x01\x86r\xa4\x01\x00\x00G@#\xbf\x9f\x18\x00\x00\x00M\xb2\x01\x86r\xa5\x01\x00\x00G@$\xf6ch\x00\x00\x00M\xb2\x01\x86r\xa6\x01\x00\x00G@&\x1dO\xb0\x00\x00\x00M\xb2\x01\x86r\xa7\x01\x00\x00G@\'U \xa0\x00\x00\x00M\xb1\x01\x86r\xa8\x01\x00\x00G@(\x8b\xf0P\x00\x00\x00M\xb1\x01\x86r\xa9\x01\x00\x00eu}r\xaa\x01\x00\x00(h\x04K\x10h\x05]r\xab\x01\x00\x00(G?\xbbO\xe8\x00\x00\x00\x00M\xab\x01\x86r\xac\x01\x00\x00G?\xe5\xd8\x1b\x80\x00\x00\x00M\xe4\x01\x86r\xad\x01\x00\x00G?\xf4\xa2~@\x00\x00\x00M\xc9\x01\x86r\xae\x01\x00\x00G?\xfdVj\xc0\x00\x00\x00M\xc9\x01\x86r\xaf\x01\x00\x00G@\x03\x05r\xe0\x00\x00\x00M\xc9\x01\x86r\xb0\x01\x00\x00G@\x07\xa3"\xe0\x00\x00\x00M\xc9\x01\x86r\xb1\x01\x00\x00G@\x0b\xfb\x1f\xe0\x00\x00\x00M\xc9\x01\x86r\xb2\x01\x00\x00G@\x10*\xa1p\x00\x00\x00M\xc8\x01\x86r\xb3\x01\x00\x00G@\x12x{\x10\x00\x00\x00M\xc8\x01\x86r\xb4\x01\x00\x00G@\x14\xe7\x07p\x00\x00\x00M\xc8\x01\x86r\xb5\x01\x00\x00G@\x17T\x98\xa0\x00\x00\x00M\xc9\x01\x86r\xb6\x01\x00\x00G@\x19\xd0{P\x00\x00\x00M\xc9\x01\x86r\xb7\x01\x00\x00G@\x1c\x10\xbdP\x00\x00\x00M\xc9\x01\x86r\xb8\x01\x00\x00G@\x1e\x7f\x9d0\x00\x00\x00M\xc9\x01\x86r\xb9\x01\x00\x00G@ g\xc2\x80\x00\x00\x00M\xc8\x01\x86r\xba\x01\x00\x00G@!\x8d\xa1@\x00\x00\x00M\xc8\x01\x86r\xbb\x01\x00\x00G@"\xb4\x87\x00\x00\x00\x00M\xc9\x01\x86r\xbc\x01\x00\x00G@#\xebQ@\x00\x00\x00M\xc8\x01\x86r\xbd\x01\x00\x00G@%\x01\xea \x00\x00\x00M\xc8\x01\x86r\xbe\x01\x00\x00G@&(\xc9H\x00\x00\x00M\xc9\x01\x86r\xbf\x01\x00\x00G@\'O\xb4`\x00\x00\x00M\xc9\x01\x86r\xc0\x01\x00\x00G@(v\x9b0\x00\x00\x00M\xc9\x01\x86r\xc1\x01\x00\x00eueu.'
TESTDATA = pickle.loads(st)



if __name__ == '__main__':
    main()

