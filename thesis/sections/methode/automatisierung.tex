\section{Automatisierung der Messung}
\label{sec:automatisierung}

Die Automatisierung der Messungen ist nicht ein notwendiges Element. Jeder Benchmark kann von Hand ausgeführt und parallel dazu die Messung vorgenommen werden. Die Automatisierung soll aber helfen, eine grössere Menge an Tests effizient vornehmen zu können. Die Wiederholung der Tests ist daher ein sehr wichtiger Bestandteil der Automatisierung. Dadurch kann die Aussage getroffen werden, dass die Messung auch bei einer Wiederholung dasselbe Resultat liefert und nicht von Störfaktoren beeinträchtigt wird. Die Automatisierung vereinfacht zudem die Anpassung der Tests und erspart somit viel Zeit, nachdem eine Ergänzung vorgenommen werden musste. Der Output erfolgt in Form von CSV-Dateien, die später in Diagrammen dargestellt werden.
\par
Für die Automatisierung wurde ein Python-Programm geschrieben, das auf einem zusätzlichen Computer ausgeführt wird. Der Computer ist mit einem Amperemeter (Multimeter) verbunden und hat über eine Remoteshell Zugang zum Board. Die Benchmarks in Form eines Kernelmoduls sind bereits auf dem Board installiert und können über das \texttt{procfs} gestartet werden. Die folgende Aufzählung zeigt den Ablauf der automatisierten Durchführung der Messung:


\begin{enumerate}
\item Anhand derselben Konfigurationsdateien, die beim Generieren des Benchmark-Sourcecodes verwendet wurden, wird zufällig die Reihenfolge für die Durchführung der Benchmarks bestimmt. Dabei wird jeder Benchmark drei mal in dieser Reihenfolge hinzugefügt.
\item Der Reihenfolge nach wird ein Benchmark auf einem ausgewählten Board ausgeführt. Die Durchführung dauert in der Regel 120 Sekunden. Die exakte Durchführungszeit wird aber im Benchmark selber gemessen.
\item Parallel zur Durchführung des Benchmarks wird ungefähr im Sekundentakt\footnote{Das Messgerät sendet die Daten als RS-232-Protokoll über eine USB-Schnittstelle. Mit dem hier verwendeten Messgerät hat man keinen Einfluss auf die Sendeperiode.} der Strom gemessen. Diese erfolgt über eine USB-Schnittstelle durch den Amperemeter (Multimeter). Die Daten werden zwischengespeichert, bis sie am Schluss in eine CSV-Datei geschrieben werden.
\item Der Benchmark erhält nach seiner Durchführung die aufgewendete Zeit als Rückgabewert. Dieser Wert entspricht sehr genau der Durchführungszeit. Sie wird ebenfalls zwischengespeichert, damit sie am Ende in einer Datei abgelegt werden kann.
\item Nach der Durchführung eines Benchmarks wird eine Pause von einer Minute eingelegt. Diese Pause ist wichtig, damit alle Benchmarks gleich behandelt werden. Bei der Ausführung eines Benchmarks kann die Temperatur des Boards erheblich ansteigen. Würden die Benchmarks also ohne Zwischenpause der Reihe nach ausgeführt, könnte es zu verzerrten Messwerten kommen.
\item Die Schritte 2 bis 5 werden wiederholt, bis sämtliche Benchmarks drei Mal durchlaufen worden sind. Sobald alle Benchmarks abgearbeitet sind, werden die Daten, die zuvor zwischengespeichert wurden, strukturiert und in die CSV-Dateien geschrieben.
\end{enumerate}