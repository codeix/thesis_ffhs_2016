\chapter{Stand des Wissens und der Technik}
\section{Funktionsweise eines Prozessors}

Ein Prozessor ist eine universelle Rechnermaschine, die sich durch eine definierte Reihe von Anweisungen programmieren lässt. Zu den arithmetischen Anweisungen gehören der Zugriff auf Speicheradressen und Sprünge innerhalb der Abfolge der Anweisungen.
Bereits der britische Mathematiker Alan Turing konnte aufzeigen, dass ein universelles Berechnungsmodell möglich ist, wenn ein Rechner neben Speicherzugriff auch Sprünge besitzt\cite{Hoffmann2014l}. Auf diesen besonderen Eigenschaften bauen die heutigen Prozessoren auf. Ein Programm, das den Prozessor ansteuert, besteht aus einer endlichen Anzahl von geordneten Anweisungen. Der Prozessor befolgt, streng nach dem Ablauf, Anweisung für Anweisung, die auch Sprünge zu anderen Stellen innerhalb des Programms besitzen.
\par
Die Prozessoren, auch Zentraleinheiten oder CPUs genannt, besitzen im Inneren drei Einheiten, die über einen Datenbus verbunden sind. Dies ist in der \autoref{fig:CPU} ersichtlich. Dabei kann der Datenbus je nach Grösse oder Leistung des CPUs variieren. Die meist verbreiteten CPUs, die in den heutigen PC verbaut sind, haben einen 64bit-Datenbus. In dieser Arbeit wird aber mit kleineren CPUs gearbeitet, die einen 32bit-Datenbus besitzen. Die Control Unit\cite{patterson2013computer} ist dafür verantwortlich, dass das Programm immer an der richtigen Stelle ausgeführt wird. Sie nimmt Anweisungen an, dekodiert diese und übergibt sie der ALU. Die Übergabe der Daten an die ALU und die Register erfolgt durch die Weichenstellung des Datenbusses. Die Arithmetic and Logical Unit (ALU) ermöglicht es, Rechenoperationen sowie logische Operationen an den Daten auszuführen. Die Register haben die Grösse des Datenbusses und dienen dazu, die Daten von und zur ALU zu bewegen. Eine CPU besitzt mehrere Register, die je nach CPU-Architektur variieren. Die Register lassen sich in zwei Kategorien, Universal- und Hilfsregister, unterteilen. In den Universalregistern lassen sich die zu bearbeitenden Daten speichern. Die Hilfsregister haben eine besondere Rolle zugeordnet erhalten. Beispielsweise zählt das Statusregister zu den Hilfsregistern. Dieses spezielle Hilfsregister gibt Aufschluss über das Resultat der vorherigen Operation. So lässt sich über dieses Hilfsregisters herauslesen, ob eine Operation von zwei Zahlen den möglichen Speicherplatz des Registers übersteigt und es zu einem sogenannten "overflow" kommt.
Da die Anzahl meist sehr klein ist, müssen die Daten immer wieder von den Registern in den RAM und wieder zurückgeladen werden.
\par
Prozessoren sind als elektronische Schaltkreise realisiert. Die Schaltkreise werden durch die Halbleitertechnologie hergestellt. Die Millionen von witzigen Transistoren, die ein Prozessor beinhaltet, werden zu logischen Bausteinen verdrahtet.
\par
In dieser Arbeit ist die Funktionsweise der ALU relevant. Wir wissen, dass die ALU eine Reihe von Anweisungen erhält und somit jeden erdenklichen Algorithmus ausführen kann. Im Rahmen dieser Arbeit wird eine Methode entwickelt, um den Energieverbrauch einer einzelnen Anweisung der ALU messen können.



\begin{figure}[t]
\centering
\includegraphics[width=1.0\textwidth]{images/cpu.pdf}
\caption{Central Processing Unit}
\label{fig:CPU}
\end{figure}

\section{Aufbau des Linux Betriebssystem}
Durch die Inspiration des Betriebssystem Minix, das von Andrew S. Tanenbaum für Ausbildungszwecke erstellt wurde, machte sich Linus Torvalds zum Ziel ein vollwertiges System neu zu schreiben. Im Jahr 1991 erschien die erste Linux Version 0.01\cite{ehses2011systemprogrammierung_chap2}. Heute ist es ein weit verbreitetes Betriebssystem, dass im Bereich Desktop, Server, Smartphone und Embedded Systems angewendet wird.
\par
Die Aufgabe des Betriebssystemkern, der meistens nur einfach Kernel genannt wird, ist es eine Softwareschicht zwischen Hardware und Programme zu erstellen. Jedes Programm hat somit nicht ein direkten Zugriff auf die Hardware. Jedes Programm, dass Informationen der Hardware benötigt muss durch die Schicht des Kernels gehen. Die Kommunikation die durch Programm und Kernel besteht, werden Systemaufrufe (engl. Systemcalls) genannt. Die unterschiedlichen Systemaufrufe sind im POSIX standardisiert\cite{ehses2011systemprogrammierung_chap2}. Zusätzlich erstellt der Kernel eine Art Abkapselung eines Programms. Dadurch können mehrere Programme gleichzeitig laufen ohne dass das eine Programm zugriff auf das andere hat. Der Kernel Verteilt die freien Ressourcen des CPU abwechslungsweise an die Programme. Dieses Verfahren heisst Multitasking und wurde seit den Anfängen unterstützt.
\par
Durch die Zusätzliche Softwareschicht der der Kernel bietet, müssen Programmierer ein Programm nicht für eine bestimmte Hardware schreiben, sondern für ein bestimmtes Betriebssystem. Dies ermöglicht eine höhere Portabilität eines Programm. Hardware wie Festplatten oder Netzwerkcontroller werden vom Kernel vereinheitlicht und dem Programm durch Systemaufrufe zur Verfügung gestellt.
\par

\begin{wrapfigure}{L}{0.49\textwidth}
\centering
\includegraphics[scale=0.8]{images/kernel.pdf}
\caption{Linux Kernel}
\label{fig:kernel}
\end{wrapfigure}

Die \autoref{fig:kernel} zeigt wie die Unterschiedlichen Schichten miteinander kommunizieren. Eine Anwendung wird ausschliesslich im Benutzermodus(engl. User Space) ausgeführt. Durch Systemaufrufe werden anfragen an den Kernel geleitet. Dabei findet ein Kontextwechsel statt vom unprivilegierter in den privilegierten Modus. Der unprivilegierter Modus bezeichnet den Benutzermodus in dem eine Applikation nur beschränkte Verfügbarkeit des Arbeitsspeicher und CPU Befehlssätze hat. Dies stellt sicher das eine Applikation gegenüber des Rest des System Abgekapselt betreiben wird und nicht ausbrechen kann. Nach dem Systemaufruf geht der Prozessor in den privilegierten Modus rüber und der Kernel trägt die Verantwortung die Anfrage im Kernelmodus (engl. Kernel Space) zu verarbeiten. Der Kernelmodus hat im Gegensatz zum Benutzermodus keine Einschränkungen und hat deswegen auch Zugang zur Hardware und Arbeitsspeicher. Der Kontextwechsel dient also dazu dass Programmcode der nicht zum Kernel gehört nur in einem unprivilegierten Modus ausgeführt werden kann.


\section{Unterschiede CISC und RISC CPUs}

Die Instruktionsarchitekturen der CPUs kann in zwei Gruppen unterteilt werden. Die CISC-Prozessoren (Custom Instruction Set Computer) mit sehr komplex und umfangreiche Instruktionsanweisungen und die RISC-Prozessoren (Reduced Instruction Set Computer) mit sehr primitive Instruktionsanweisungen.
\par
Der x86-Befehlssatz wurde durch den Intel 8086 Prozessor 1978 eingeführt und wurde somit zum Urvater moderne CISC-Prozessoren. Schon damals besitze dieser Prozessor ca. 120 Befehlssätze. Im Verlauf der Jahren zeichneten sich die CISC-Prozessoren mit immer mehr und komplexeren Befehlssätze aus. Dabei wurde immer beachtet das die Architektur, der neueren Modelle Rückwärtskompatibel, damit die Software ohne Anpassung auf neueren Prozessoren laufen kann. Die CISC-Architektur erlaubt es komplexe Instruktionen in einem Befehlssatz zu schreiben. Dabei wird der Befehlssatz von der CPU dekodiert und in einem oder mehreren Taktzyklen ausgeführt. Die Komplexität der Befehlssätze geht so weit das sogar Hardwareschleifen möglich werden. Ein anderes Merkmal der CISC-Prozessoren ist die geringe Anzahl der Register. Dafür kann ein Befehlssatz direkt die Anweisung haben, Daten von einer Speicherzelle im RAM zu einer andere zu transferiert ohne dabei auf ein Register angewiesen zu sein. Damit die immer komplexeren Befehlssätze dekodiert und in Instruktionen aufgeteilt werden können, besitzen die heutige CISC-Prozessoren sehr umfassende Steuerwerke. Allerdings bestehen die Steuerwerke nicht nur als Hardware Implementation, sondern besitzen teils innerhalb Microcode, die die Instruktionen an die ALU (Rechnerwerk) bilden kann.
\par






\section{Energy Storage in a Capacitor}


Grundlage Technische Informatik Kap. Halbleitertechnik lesen!